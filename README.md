Задача:

    1) Запустить nginx на нестандартном порту 3-мя разными способами:

    переключатели setsebool;
    добавление нестандартного порта в имеющийся тип;
    формирование и установка модуля SELinux.
    К сдаче:
    README с описанием каждого решения (скриншоты и демонстрация приветствуются).

    2. Обеспечить работоспособность приложения при включенном selinux.
    развернуть приложенный стенд https://github.com/mbfx/otus-linux-adm/tree/master/selinux_dns_problems;
    выяснить причину неработоспособности механизма обновления зоны (см. README);
    предложить решение (или решения) для данной проблемы;
    выбрать одно из решений для реализации, предварительно обосновав выбор;
    реализовать выбранное решение и продемонстрировать его работоспособность.

    К сдаче:
    README с анализом причины неработоспособности, возможными способами решения и обоснованием выбора одного из них;
    исправленный стенд или демонстрация работоспособной системы скриншотами и описанием.

Решение:

1) Сразу проблема: стенд №1 не запускается.
После долгой диагностики стало понятно, что репозитории на mirror.centos.org не доступны из РФ.
Либо пробрасывать впн на виртуалку, либо использовать альтернативные репозитории. Выбираю второе.

Меняю вагрант файл.

Также доустановим policycoreutils-python, т.к. по умолчанию audit2why не установлен.

2) Здесь та же ситуация, что и в первом случае. Я добавил в начало playbook.yml:

- hosts: all # part running on all hosts
  
  become: true
  
  tasks:
  
  - name: copy repo CentOS-Base.repo
  
    copy:
  
      src: files/CentOS-Base.repo
  
      dest: /etc/yum.repos.d/CentOS-Base.repo
  
      owner: root
  
      group: root
  
      mode: 0644

Исправленный CentOS-Base.repo я положил в files

Итого cделано:

Последовательность моих действий с подробным описанием в README.txt

1) Каталог "1".

   Исправленный репозиторий CentOS-Base.repo и исправленный Vagrant file
   
2) Каталог "2". 
Исправлен playbook.yml. Можно посмотреть здесь: selinux/2/selinux_dns_problems/provisioning
Добавлен файл с исправленным репозиторием: selinux/2/selinux_dns_problems/provisioning/files

